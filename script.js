const questions = [
    "Я избегаю работать с теми, кто меня критикует.",
    "Я с трудом принимаю решения без поддержки или совета со стороны других.",
    "Я часто теряюсь в деталях и перестаю видеть картину в целом.",
    "Я хочу быть в центре внимания.",
    "Я лучше, чем обо мне думают окружающие.",
    "Я пойду на крайние меры, чтобы не допустить ухода любимого человека.",
    "Другие жаловались, что я недостаточно хорошо справляюсь с моей работой.",
    "Несколько раз у меня были проблемы с законом.",
    "Мне не интересно проводить время с семьей или друзьями.",
    "Я получаю особые сообщения или сигналы от людей и предметов, которые меня окружают.",
    "Я уверен, что люди воспользуются моими недостатками в своих интересах или попытаются меня обмануть, если я им позволю.",
    "Иногда я чувствую себя расстроенным.",
    "Я завожу дружбу только с теми людьми, в симпатии которых ко мне я не сомневаюсь.",
    "Обычно у меня подавленное настроение.",
    "Я предпочитаю, чтобы другие брали на себя ответственность за мое поведение.",
    "Я часто трачу очень много времени, пытаясь все довести до совершенства.",
    "Я намного сексуальнее, чем большинство людей.",
    "Я часто думаю о том, каким великим человеком я являюсь сейчас или стану в будущем.",
    "Я отношусь к другим только с любовью или с ненавистью.",
    "Часто я дерусь.",
    "Я чувствую, что другие не понимают или не ценят меня.",
    "Я предпочитаю все делать сам без посторонней помощи.",
    "Я обладаю способностью заранее предвидеть некоторые события, до того, как они произойдут.",
    "Я часто задумываюсь, можно ли действительно доверять людям, которых я знаю.",
    "Иногда я говорю о людях за их спиной.",
    "Я сдержан в проявлении своих чувств с близкими людьми, так как боюсь выглядеть смешным.",
    "Я боюсь потерять поддержку других, если не соглашусь с ними.",
    "У меня много недостатков.",
    "Для меня работа важнее, чем семья, друзья или развлечения.",
    "Я легко выражаю свои чувства.",
    "Только очень немногие люди могут действительно оценить и понять меня.",
    "Я часто задаюсь вопросом, кто я на самом деле.",
    "Мне трудно платить долги, потому что я не задерживаюсь долго на одной работе.",
    "Секс мне безразличен.",
    "Многие считают меня своенравным и горячим.",
    "Я могу часто ощущать то, что другие не могут.",
    "Возможно, окружающие используют против меня то, что я им говорю.",
    "Некоторые люди мне не нравятся.",
    "Я очень чувствителен к критике и отказам в свой адрес.",
    "Мне трудно начать что-либо делать без посторонней помощи.",
    "Мои нравственные нормы выше, чем у других людей.",
    "Я свой самый строгий критик.",
    "Я использую свой внешний вид, чтобы привлечь внимание.",
    "Я очень хочу, чтобы другие люди обращали на меня внимание или хвалили меня.",
    "Бывало, что я наносил себе вред или пытался убить себя.",
    "Я многое делаю, не считаясь с последствиями.",
    "Существует немного вещей, которые меня действительно интересуют.",
    "Люди часто с трудом понимают, что я говорю.",
    "Я не люблю, когда начальник говорит мне, как я должен выполнять свою работу.",
    "Я всегда пытаюсь выяснить истинный смысл того, что говорят люди.",
    "Я никогда не лгу.",
    "Я опасаюсь встреч с новыми людьми, так как чувствую себя при этом как-то неловко.",
    "Если бы люди относились ко мне лучше, то я стал бы вести себя по-другому.",
    "У меня есть много вещей, которые мне не нужны, но с которыми я не в силах расстаться.",
    "Даже если я говорю много, другие говорят, что я не сказал самого главного.",
    "Я очень много беспокоюсь.",
    "Я хочу, чтобы люди были ко мне благосклонны, даже если я отношусь к ним недостаточно доброжелательно.",
    "Я человек настроения.",
    "Я с легкостью говорю неправду.",
    "Мне не нужны близкие друзья.",
    "Я всегда начеку, чтобы никто не обошел меня.",
    "Я никогда не забываю и не прощаю обид.",
    "Я плохо отношусь к людям, которые более удачливы, чем я.",
    "А ядерная война, может быть, вовсе и не такая плохая идея.",
    "Когда я один, я чувствую себя беспомощным и неспособным позаботиться о себе.",
    "Если другие не могут делать вещи нормально, я предпочитаю делать их сам.",
    "Я склонен все драматизировать.",
    "Некоторые думают, что я имею преимущества над другими людьми.",
    "Я порой чувствую, что жизнь моя уныла и бессмысленна.",
    "Я часто критикую других.",
    "Мне все равно, что люди обо мне говорят.",
    "Мне трудно общаться с кем-нибудь один на один.",
    "Люди часто жалуются на то, что я не понимаю, когда им плохо.",
    "Люди думают, что я необычный, оригинальный или странный.",
    "Я люблю риск.",
    "Я много лгу, отвечая на эти вопросы.",
    "Я часто жалуюсь на свою жизнь.",
    "Мне трудно сдерживать свой гнев и проявления моего характера.",
    "Многие люди завидуют мне.",
    "Я легко поддаюсь влиянию других.",
    "Мне кажется, что я бережливый, хотя некоторые считают меня жадным.",
    "Когда моим близким отношениям с кем-либо угрожает разрыв, я начинаю искать другого человека, с которым я мог бы быть близок.",
    "Я страдаю из-за низкой самооценки.",
    "Я пессимист.",
    "Для меня, отвечать на оскорбления — напрасная трата времени.",
    "Мне нехорошо, когда я нахожусь среди других людей.",
    "Я боюсь смутиться в незнакомой обстановке.",
    "Я боюсь остаться без поддержки.",
    "Люди говорят, что я очень упрямый.",
    "Взаимоотношения с людьми я воспринимаю более серьезно, чем они.",
    "Я могу поругаться с кем-нибудь, а через некоторое время начинаю извиняться.",
    "Другие считают меня высокомерным.",
    "В момент сильного стресса я веду себя как ненормальный или просто не помню потом, что происходило.",
    "Я не обращаю внимания на чувства других, если получаю то, чего хотел.",
    "С другими людьми я всегда сохраняю дистанцию.",
    "Я подозреваю, что моя жена или девушка (муж или любовник) мне изменяют.",
    "Я часто чувствую себя виноватым."
];

// Подпункты для вопроса 98
const question98SubItems = [
    "Тратил больше денег, чем имел.",
    "Имел сексуальные отношения с человеком, которого едва знал.",
    "Злоупотреблял алкоголем.",
    "Принимал наркотики.",
    "Был неумеренным в еде.",
    "Безрассудно рисковал.",
    "Совершал мелкие кражи в магазинах.",
    "Играл в азартные игры."
];

// Подпункты для вопроса 99
const question99SubItems = [
    "Меня считали хулиганом.",
    "Как правило, я начинал драться первым.",
    "Я использовал в драках все средства, которые попадались мне под руку.",
    "Я грабил или нападал на прохожих.",
    "Я применял физическое насилие по отношению к людям.",
    "Я жестоко относился к животным.",
    "Я принуждал кого-либо заниматься со мной сексом.",
    "Я много врал.",
    "Я не приходил домой ночевать без разрешения родителей.",
    "Я воровал вещи.",
    "Я устраивал поджоги.",
    "Я бил окна или портил чье-либо имущество.",
    "Я более одного раза убегал из дома.",
    "До 13 лет я часто прогуливал школу.",
    "Я забирался в чужие дома, автомобили или рабочие помещения."
];

const questionContainer = document.getElementById("question-container");

function displayQuestions() {
    // Обычные вопросы (1–97)
    questions.forEach((question, index) => {
        const questionDiv = document.createElement("div");
        questionDiv.classList.add("question");
        questionDiv.innerHTML = `
            <p>${index + 1}. ${question}</p>
            <label><input type="radio" name="q${index}" value="1"> Да</label>
            <label><input type="radio" name="q${index}" value="0"> Нет</label>
        `;
        questionContainer.appendChild(questionDiv);
    });

    // Вопрос 98 с подпунктами
    const q98Div = document.createElement("div");
    q98Div.classList.add("question");
    q98Div.innerHTML = `<p>98. Я часто, не задумываясь, делал вещи (подобные перечисленным ниже), которые могли кончиться для меня плохо:</p>`;
    question98SubItems.forEach((subItem, subIndex) => {
        q98Div.innerHTML += `
            <label><input type="checkbox" name="q98_sub${subIndex}" value="1"> ${subItem}</label><br>
        `;
    });
    questionContainer.appendChild(q98Div);

    // Вопрос 99 с подпунктами
    const q99Div = document.createElement("div");
    q99Div.classList.add("question");
    q99Div.innerHTML = `<p>99. В детстве (до 15 лет) я был «трудным» ребенком и делал кое-что из вещей, перечисленных ниже:</p>`;
    question99SubItems.forEach((subItem, subIndex) => {
        q99Div.innerHTML += `
            <label><input type="checkbox" name="q99_sub${subIndex}" value="1"> ${subItem}</label><br>
        `;
    });
    questionContainer.appendChild(q99Div);
}

function submitAnswers() {
    const answers = [];
    let allAnswered = true;

    // Сбор ответов для вопросов 1–97
    questions.forEach((_, index) => {
        const selected = document.querySelector(`input[name="q${index}"]:checked`);
        if (selected) {
            answers.push(parseInt(selected.value));
        } else {
            allAnswered = false;
        }
    });

    // Сбор ответов для вопроса 98
    const q98Answers = [];
    question98SubItems.forEach((_, subIndex) => {
        const checked = document.querySelector(`input[name="q98_sub${subIndex}"]:checked`);
        q98Answers.push(checked ? 1 : 0);
    });
    answers.push(q98Answers);

    // Сбор ответов для вопроса 99
    const q99Answers = [];
    question99SubItems.forEach((_, subIndex) => {
        const checked = document.querySelector(`input[name="q99_sub${subIndex}"]:checked`);
        q99Answers.push(checked ? 1 : 0);
    });
    answers.push(q99Answers);

    // Проверка, все ли вопросы 1–97 отвечены
    if (!allAnswered) {
        alert("Пожалуйста, ответьте на все вопросы (1–97)!");
        return;
    }

    // Сохранение ответов в localStorage
    localStorage.setItem('testAnswers', JSON.stringify(answers));

    // Перенаправление на страницу результатов
    window.location.href = 'results.html';
}

displayQuestions();